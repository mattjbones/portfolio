<!DOCTYPE html>
<html lang="en">
<head>
  {% include 'head' %}
  {% assign posts = site.posts | sort: "id" | reverse %}
  {% assign idx = nil %}
  {% for p in posts %}
    {% if p.url == page.url %}
      {% assign idx = forloop.index0 %}
    {% endif %}
  {% endfor %}
  {% if idx != nil %}
    {% assign prev_index  = idx | minus: 1 %}
    {% assign next_index  = idx | plus: 1 %}
    {% assign prev2_index = idx | minus: 2 %}
    {% assign next2_index = idx | plus: 2 %}
    {% assign prev3_index = idx | minus: 3 %}
    {% assign next3_index = idx | plus: 3 %}
    {% if prev_index  >= 0 %}{% assign prev  = posts[prev_index]  %}{% endif %}
    {% if next_index  < posts.size %}{% assign next  = posts[next_index]  %}{% endif %}
    {% if prev2_index >= 0 %}{% assign prev2 = posts[prev2_index] %}{% endif %}
    {% if next2_index < posts.size %}{% assign next2 = posts[next2_index] %}{% endif %}
    {% if prev3_index >= 0 %}{% assign prev3 = posts[prev3_index] %}{% endif %}
    {% if next3_index < posts.size %}{% assign next3 = posts[next3_index] %}{% endif %}
  {% endif %}
  {% if prev or next %}
<script type="speculationrules">
{
  "prerender": [
    {
      "urls": [{% if prev %}"{{ prev.url }}"{% if next %}, {% endif %}{% endif %}{% if next %}"{{ next.url }}"{% endif %}]
    }
  ]{% if prev2 or next2 %},
  "prefetch": [
    {
      "urls": [{% if prev2 %}"{{ prev2.url }}"{% if next2 %}, {% endif %}{% endif %}{% if next2 %}"{{ next2.url }}"{% endif %}]
    }
  ]{% endif %}
}
</script>
  {% endif %}
</head>
<body class="photo-page">
  <div class="hover-zone hover-zone--top" aria-hidden="true"></div>
  <nav class="photo-nav">
    <a class="photo-nav-title" href="{{ site.baseurl }}">Photos by Matt</a>
  </nav>

  <div class="photo-viewer">
    <div class="photo-strip" id="photo-strip">
      {% if prev3 %}
      <div class="photo-hero photo-hero--far-prev" data-url="{{ prev3.url }}">
        <img src="{{ prev3.image }}" alt="{{ prev3.title }}" loading="lazy">
      </div>
      {% endif %}
      {% if prev2 %}
      <div class="photo-hero photo-hero--prev2" data-url="{{ prev2.url }}">
        <img src="{{ prev2.image }}" alt="{{ prev2.title }}" loading="lazy">
      </div>
      {% endif %}
      {% if prev %}
      <div class="photo-hero photo-hero--prev" data-url="{{ prev.url }}">
        <img src="{{ prev.image }}" alt="{{ prev.title }}" loading="lazy">
      </div>
      {% endif %}
      <div class="photo-hero photo-hero--current">
        <img src="{{ page.image }}" alt="{{ page.title }}">
      </div>
      {% if next %}
      <div class="photo-hero photo-hero--next" data-url="{{ next.url }}">
        <img src="{{ next.image }}" alt="{{ next.title }}" loading="lazy">
      </div>
      {% endif %}
      {% if next2 %}
      <div class="photo-hero photo-hero--next2" data-url="{{ next2.url }}">
        <img src="{{ next2.image }}" alt="{{ next2.title }}" loading="lazy">
      </div>
      {% endif %}
      {% if next3 %}
      <div class="photo-hero photo-hero--far-next" data-url="{{ next3.url }}">
        <img src="{{ next3.image }}" alt="{{ next3.title }}" loading="lazy">
      </div>
      {% endif %}
    </div>
    <div class="hover-zone hover-zone--bottom" aria-hidden="true"></div>
    <nav class="photo-pager photo-pager--hero" aria-label="Photo navigation">
      {% if prev %}
      <a class="photo-pager-link prev" href="{{ prev.url }}">← previous</a>
      {% endif %}
      {% if next %}
      <a class="photo-pager-link next" href="{{ next.url }}">next →</a>
      {% endif %}
    </nav>
  </div>

  <section class="photo-details">
    <h1 class="photo-details-title">{{ page.title }}</h1>
    {% if page.description %}<p class="photo-details-desc">{{ page.description }}</p>{% endif %}

    <table class="photo-meta-table">
      {% if page.camera %}<tr><th>Camera</th><td>{{ page.camera }}</td></tr>{% endif %}
      {% if page.lens %}<tr><th>Lens</th><td>{{ page.lens }}</td></tr>{% endif %}
      {% if page.film %}<tr><th>Film</th><td>{{ page.film }}</td></tr>{% endif %}
      {% if page.film_format %}<tr><th>Format</th><td>{{ page.film_format }}</td></tr>{% endif %}
      {% if page.exposure_compensation %}<tr><th>Exposure</th><td>{{ page.exposure_compensation }}</td></tr>{% endif %}
      {% if page.developed_by %}<tr><th>Developed</th><td>{{ page.developed_by }}</td></tr>{% endif %}
      {% if page.location %}<tr><th>Location</th><td>{{ page.location }}</td></tr>{% endif %}
      {% if page.date %}<tr><th>Date</th><td>{{ page.date | date_to_string }}</td></tr>{% endif %}
    </table>

    {% if page.tags %}
    <ul class="tag-list">
      {% assign tags = page.tags | split: " " %}
      {% for tag in tags %}
      <li><a href="{{ site.baseurl }}tags/{{ tag }}/">{{ tag }}</a></li>
      {% endfor %}
    </ul>
    {% endif %}

  </section>
  <script src="{{ site.baseurl }}public/js/photo-nav.js"></script>
</body>
</html>
