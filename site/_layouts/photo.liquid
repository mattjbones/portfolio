<!DOCTYPE html>
<html lang="en">
<head>
  {% include 'head' %}
  {% assign posts = site.posts | sort: "date" | reverse %}
  {% assign idx = nil %}
  {% for p in posts %}
    {% if p.url == page.url %}
      {% assign idx = forloop.index0 %}
    {% endif %}
  {% endfor %}
  {% if idx != nil %}
    {% assign prev_index = idx | minus: 1 %}
    {% assign next_index = idx | plus: 1 %}
    {% if prev_index >= 0 %}{% assign prev = posts[prev_index] %}{% endif %}
    {% if next_index < posts.size %}{% assign next = posts[next_index] %}{% endif %}
  {% endif %}
  {% assign page_film = "" %}
  {% if page.film_name and page.film_name != "" %}
    {% assign page_film = page.film_name %}
    {% if page.film_speed and page.film_speed != "" %}
      {% assign page_film = page_film | append: " " | append: page.film_speed %}
    {% endif %}
    {% if page.film_type and page.film_type != "" %}
      {% assign page_film = page_film | append: " " | append: page.film_type %}
    {% endif %}
  {% endif %}
  {% assign page_alt = page.title | default: "" %}
  {% if page.location and page.location != "" %}
    {% if page_alt != "" %}{% assign page_alt = page_alt | append: " — " %}{% endif %}
    {% assign page_alt = page_alt | append: page.location %}
  {% endif %}
  {% if page.camera and page.camera != "" %}
    {% if page_alt != "" %}
      {% assign page_alt = page_alt | append: " — shot on " %}
    {% else %}
      {% assign page_alt = "Shot on " %}
    {% endif %}
    {% assign page_alt = page_alt | append: page.camera %}
  {% endif %}
  {% if page_film != "" %}
    {% if page_alt != "" %}{% assign page_alt = page_alt | append: " — " %}{% endif %}
    {% assign page_alt = page_alt | append: page_film %}
  {% endif %}
  {% if page_alt == "" %}{% assign page_alt = "Film photograph from photos by matt" %}{% endif %}
  {% if prev or next %}
<script type="speculationrules">
{
  "prerender": [
    {
      "urls": [{% if prev %}"{{ prev.url }}"{% if next %}, {% endif %}{% endif %}{% if next %}"{{ next.url }}"{% endif %}]
    }
  ]
}
</script>
  {% endif %}
</head>
<body class="photo-page">
  <div class="hover-zone hover-zone--top" aria-hidden="true"></div>
  <nav class="photo-nav">
    <a class="photo-nav-title" href="{{ site.baseurl }}">photos by matt</a>
  </nav>

  <div class="photo-viewer">
    <div class="photo-strip" id="photo-strip">
      {% if prev %}
      <div class="photo-hero" data-url="{{ prev.url }}">
        <img src="{{ prev.image }}" alt="{{ prev.title | default: "Previous photo" }}" loading="lazy">
      </div>
      {% endif %}
      <div class="photo-hero photo-hero--current">
        <img src="{{ page.image }}" alt="{{ page_alt }}">
      </div>
      {% if next %}
      <div class="photo-hero" data-url="{{ next.url }}">
        <img src="{{ next.image }}" alt="{{ next.title | default: "Next photo" }}" loading="lazy">
      </div>
      {% endif %}
    </div>
    <div class="hover-zone hover-zone--bottom" aria-hidden="true"></div>
    <nav class="photo-pager photo-pager--hero" aria-label="Photo navigation">
      {% if prev %}
      <a class="photo-pager-link prev" href="{{ prev.url }}">← previous</a>
      {% endif %}
      {% if next %}
      <a class="photo-pager-link next" href="{{ next.url }}">next →</a>
      {% endif %}
    </nav>
  </div>

  <section class="photo-details">
    <h1 class="photo-details-title">{{ page.title }}</h1>
    {% if page.description %}<p class="photo-details-desc">{{ page.description }}</p>{% endif %}

    <table class="photo-meta-table">
      {% if page.camera %}<tr><th>Camera</th><td>{{ page.camera }}</td></tr>{% endif %}
      {% if page.lens %}<tr><th>Lens</th><td>{{ page.lens }}</td></tr>{% endif %}
      {% if page.film_name %}<tr><th>Film</th><td>{{ page.film_name }}</td></tr>{% endif %}
      {% if page.film_format %}<tr><th>Format</th><td>{{ page.film_format }}</td></tr>{% endif %}
      {% if page.film_speed %}<tr><th>Speed</th><td>{{ page.film_speed }}</td></tr>{% endif %}
      {% if page.film_type %}<tr><th>Type</th><td>{{ page.film_type }}</td></tr>{% endif %}
      {% if page.exposure_compensation %}<tr><th>Exposure</th><td>{{ page.exposure_compensation }}</td></tr>{% endif %}
      {% if page.developed_by %}<tr><th>Developed</th><td>{{ page.developed_by }}</td></tr>{% endif %}
      {% if page.location %}<tr><th>Location</th><td>{{ page.location }}</td></tr>{% endif %}
      {% if page.date %}<tr><th>Date</th><td>{{ page.date | date_to_string }}</td></tr>{% endif %}
    </table>

    {% assign tags_raw = page.tags | default: "" | strip %}
    {% if tags_raw != "" %}
    <ul class="tag-list">
      {% assign tags = tags_raw | split: " " %}
      {% for tag in tags %}
      {% assign clean_tag = tag | strip %}
      {% if clean_tag != "" %}
      <li><a href="{{ site.baseurl }}tags/{{ clean_tag }}/">{{ clean_tag }}</a></li>
      {% endif %}
      {% endfor %}
    </ul>
    {% endif %}

  </section>
  <script src="{{ site.baseurl }}public/js/photo-nav.js"></script>
</body>
</html>
